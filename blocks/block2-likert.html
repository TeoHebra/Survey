<!-- =============================
     BLOCK 2: Scaling Assessment
     ============================= -->
<div id="block2-container">
  <!-- Eight randomly‐selected items (2 per category) will be injected here -->
</div>

<script>
// ─── 1. All items by category ───
const categories = {
  S: [
    "S1 Incorporation of rare elements such as selenium or boron increases a metabolite’s novelty.",
    "S2 A new ring system is an indicator of novelty.",
    "S3 (R) N-acylation or similar motif-based decoration are unimportant when claiming novelty.",
    "S4 (R) Changing the oxidation state of a functional group is of little novelty."
  ],
  B: [
    "B1 An enzyme that catalyses a unprecedented reaction is novel.",
    "B2 Use of uncommon cofactors increases the novelty of a pathway.",
    "B3 (R) Including a tailoring enzyme from another pathway is of low novelty.",
    "B4 (R) If the final product of a reaction resembles a known compound, the catalysis is not novel."
  ],
  F: [
    "F1 Bioactivity in an under-explored target class is an important factor for novelty.",
    "F2 (R) Without demonstrated bioactivity, a new structure is not an important novelty discovery.",
    "F3 Selective activity against a previously untreatable pathogen is an important novelty signal.",
    "F4 Dual-function metabolites (e.g. toxin + signal) are an important form of novelty."
  ],
  E: [
    "E1 Production by a taxon where the compound was never seen is an important novelty factor.",
    "E2 Chemical convergence across distant lineages is an important novelty cue.",
    "E3 (R) Finding a known metabolite in a new species is not an important novelty event.",
    "E4 Chemical-diversity hotspots in unexplored biomes are important indicators of future novelty."
  ]
};

// ─── 2. Shuffle helper (Fisher–Yates) ───
function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ─── 3. Pick 2 items from each category ───
function pickTwoPerCategory() {
  const selected = [];
  Object.keys(categories).forEach(catKey => {
    const copy = categories[catKey].slice();
    shuffleArray(copy);
    selected.push(...copy.slice(0, 2));
  });
  return selected; // eight total
}

// ─── 4. Render all eight statements with a 7-point Likert ───
function renderBlock2() {
  const container = document.getElementById("block2-container");
  container.innerHTML = ""; // clear previous (if any)

  // Grab exactly 2 from each of S, B, F, E
  const items = pickTwoPerCategory();

  // Change these labels if your CSS expects something different.
  // Right now we’re using simple numbers 1–7; your styles.css can add text/icons via pseudo-elements if desired.
  const scaleLabels = ["1", "2", "3", "4", "5", "6", "7"];

  items.forEach((statementText, idx) => {
    // 4.1. Question wrapper
    const questionDiv = document.createElement("div");
    questionDiv.className = "block2-question";

    // 4.2. Statement itself
    const p = document.createElement("p");
    p.textContent = statementText;
    questionDiv.appendChild(p);

    // 4.3. Radio buttons container
    const radioContainer = document.createElement("div");
    radioContainer.className = "likert-scale";

    scaleLabels.forEach((labelText, scaleIdx) => {
      const radioId = `block2_q${idx}_opt${scaleIdx + 1}`;

      // 4.3.1. <input type="radio">
      const radioInput = document.createElement("input");
      radioInput.type = "radio";
      radioInput.name = `block2_q${idx}`;
      radioInput.id = radioId;
      radioInput.value = String(scaleIdx + 1);
      radioInput.className = "likert-input";

      // 4.3.2. <label> for that input
      const radioLabel = document.createElement("label");
      radioLabel.htmlFor = radioId;
      radioLabel.textContent = labelText;
      radioLabel.className = "likert-label";

      radioContainer.appendChild(radioInput);
      radioContainer.appendChild(radioLabel);
    });

    questionDiv.appendChild(radioContainer);
    container.appendChild(questionDiv);
  });
}

// ─── 5. Fire on page load ───
document.addEventListener("DOMContentLoaded", renderBlock2);
</script>
