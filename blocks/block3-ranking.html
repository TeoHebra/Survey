<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Block 3 – Vignette Ranking (SurveyJS)</title>

  <!-- 1) SurveyJS Core CSS (defaultV2 theme) -->
  <link
    href="https://unpkg.com/survey-core@1.9.71/defaultV2.min.css"
    rel="stylesheet"
  />

  <!-- 2) Optional: adjust your page’s body styling -->
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    .survey‐container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #ffffff;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 12px;
      color: #333333;
    }
    p.prompt {
      font-size: 1rem;
      margin-bottom: 20px;
      line-height: 1.4;
      color: #555555;
    }
  </style>
</head>
<body>
  <div class="survey‐container">
    <h1>Block 3 – Vignette Ranking</h1>
    <p class="prompt">
      Below is a drag-and-drop ranking question powered by SurveyJS.  
      Simply drag each vignette into the order you feel is most (top) to least (bottom) necessary.  
      SurveyJS will not allow duplicates—only one vignette can occupy each position.
    </p>

    <!-- 3) This is where SurveyJS will render the ranking question -->
    <div id="surveyElement"></div>

    <!-- 4) (Optional) You can also show results below if you want to debug/demo -->
    <div id="surveyResult" style="margin-top: 20px; font-family: monospace;"></div>
  </div>

  <!-- 5) Include jQuery (SurveyJS depends on it for the “survey‐jquery” build) -->
  <script src="https://unpkg.com/jquery@3.6.4/dist/jquery.min.js"></script>

  <!-- 6) Include SurveyJS “survey‐jquery” package -->
  <script src="https://unpkg.com/survey-jquery@1.9.71/survey.jquery.min.js"></script>

  <!-- 7) Initialize the SurveyJS ranking question -->
  <script>
    // Use the default “modern” theme by calling this before creating the model:
    Survey.StylesManager.applyTheme("defaultV2");

    // Define your survey JSON:
    const surveyJSON = {
      // If you want multiple pages, you can add an array here; for this example we only need one page
      title: "Block 3 – Vignette Ranking",
      showProgressBar: "bottom",
      pages: [
        {
          name: "page1",
          elements: [
            {
              type: "ranking",
              name: "vignetteRanking",
              title: "Drag each vignette into the order you feel is most (top) to least (bottom) necessary:",
              isRequired: true,
              minSelectedChoices: 4,
              maxSelectedChoices: 4,
              // These “choices” appear in a list you can drag up/down
              choices: [
                {
                  value: "v1",
                  text: "Vignette 1: Lorem ipsum dolor sit amet, consectetur adipiscing elit…"
                },
                {
                  value: "v2",
                  text: "Vignette 2: Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua…"
                },
                {
                  value: "v3",
                  text: "Vignette 3: Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris…"
                },
                {
                  value: "v4",
                  text: "Vignette 4: Duis aute irure dolor in reprehenderit in voluptate velit esse cillum…"
                }
              ]
            }
          ]
        }
      ],
      // You can configure what happens when the user completes the page:
      completedHtml: "<h3>Thank you!</h3><p>You have ranked all 4 vignettes. Your order was:</p><pre>{vignetteRanking}</pre>"
    };

    // Create a SurveyJS Model from the JSON definition:
    const survey = new Survey.Model(surveyJSON);

    // Optional: Listen for "onComplete" to display the result in #surveyResult
    survey.onComplete.add(function (sender) {
      // `sender.data` is an object of all question values
      // For a ranking question, sender.data.vignetteRanking is an array of "values" in their final order
      document.querySelector("#surveyResult").innerHTML =
        "<strong>Final Ranking (value order):</strong> " +
        JSON.stringify(sender.data.vignetteRanking);
    });

    // Render the survey into the #surveyElement div:
    $("#surveyElement").Survey({ model: survey });
  </script>
</body>
</html>
