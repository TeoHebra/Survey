<!-- blocks/block1-open.html -->
<section class="survey-block" id="block1" data-type="open">
  <h2>Block 1 – Open‐Ended Response</h2>
  <p class="prompt">
    In your own words, please describe what “novelty” means to you in the context of metabolites.
  </p>

  <!-- The <textarea> where the respondent types their answer -->
  <textarea
    id="block1-text"
    name="block1-text"
    placeholder="Type your answer here…"
    rows="6"
    style="width: 100%; box-sizing: border-box;"
  ></textarea>

  <div class="navigation">
    <button class="prev-btn" disabled>Back</button>
    <button class="next-btn">Next</button>
  </div>

  <!-- ─────────────────────────────────────────────────────────────────
       SCRIPT: Persist Block 1’s textarea value on the window object only,
       so it survives Next→Back but resets on a full refresh.
     ───────────────────────────────────────────────────────────────── -->
  <script>
    (function() {
      // 1) Grab the <textarea> by ID
      const textarea = document.getElementById('block1-text');
      if (!textarea) return;

      // 2) On first load of this block, check if we have window.block1Text
      //    If so, restore it. Otherwise, leave blank.
      if (window.block1Text !== undefined) {
        textarea.value = window.block1Text;
      }

      // 3) Every time the user types (input event), save the current value
      //    to a window‐level variable (not localStorage).
      textarea.addEventListener('input', () => {
        window.block1Text = textarea.value;
      });
    })();
  </script>
</section>
